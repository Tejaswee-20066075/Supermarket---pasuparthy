<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <link rel="stylesheet" href="register.css">
</head>
<body>
    <h2>Register</h2>
    <form name="RegistrationForm" onsubmit="return doRegister()">
        <input class="box" type="text" name=name placeholder=Name required>
        <input class="box" type=email name=email placeholder=Email required>
        <input class="box" type=password name=password placeholder=Password required>
        <input class="box" type=password name=confirm placeholder=Confirm Password required>
        <button type="submit">Register</button>
        
    </form>
    <p><a href="login.html">Already Registered? Login to your Account</a></p>
    <script>
        var API_URL = window.location.origin;                       
        function doRegister() {                                                                      //function for registration
            var name = document.RegistrationForm.name.value;                                     //get name,email etc from form
            var email = document.RegistrationForm.email.value;
            var pass = document.RegistrationForm.password.value;
            var conf = document.RegistrationForm.confirm.value;
            if (!name || !email || !pass || !conf) {
                alert("All fields are required");
                return false;
            }
            if (pass !== conf) {                                                                  //if password and confirm password are same return they doesn't match
            alert("Passwords do not match");
            return false;
            
        }
        fetch(API_URL + "/api/register", {                                                       //sends request from js to backend API
            method: "POST",                                                                        //method POST send data to server
            headers: { "Content-Type": "application/joson" },
            body: JSON.stringify({                                                               //give data in json format
                name: name,
                email: email,
                password: pass
            })
        })
        .then(function(response) {                                                             //response contain status code 
            return response.json().then(function(data) {
                if (response.ok) {
                    alert("Registration Successful!");
                    window.location = "login.html";
                } else {
                    alert(data.error || "Registration failed");
                }
            });
        })
         .catch(function(error) {                                 //when server or network connectivoty issue occurs
            alert("Error connecting to server");
            console.error(error);
        });

        return false;
    }
    </script>
</body>
</html>
